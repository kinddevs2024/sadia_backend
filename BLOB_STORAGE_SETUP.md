# Vercel Blob Storage Setup

Проект теперь использует Vercel Blob Storage для хранения загруженных файлов вместо файловой системы.

## Установка

1. Установите пакет `@vercel/blob`:
```bash
cd sadia_backend
npm install @vercel/blob
```

## Настройка на Vercel

1. **Включите Vercel Blob Storage в настройках проекта:**
   - Перейдите в настройки вашего проекта на Vercel
   - Откройте вкладку "Storage"
   - Создайте новый Blob Store или используйте существующий

2. **Установите переменную окружения (опционально):**
   Vercel Blob автоматически определяет токен из переменных окружения Vercel.
   Если вы работаете локально, создайте файл `.env.local`:
   ```
   BLOB_READ_WRITE_TOKEN=your_token_here
   ```
   Токен можно получить в настройках Vercel Blob Store.

## Изменения в коде

### Файлы, использующие Blob Storage:

1. **`lib/blob-storage.ts`** - Утилита для работы с Vercel Blob
   - `uploadFileToBlob()` - Загрузка файла
   - `uploadBufferToBlob()` - Загрузка буфера

2. **`app/api/upload/route.ts`** - Основной endpoint загрузки файлов
   - Теперь использует Vercel Blob вместо файловой системы

3. **`app/api/products/[id]/images/route.ts`** - Загрузка изображений продуктов
   - Теперь использует Vercel Blob вместо файловой системы

## Преимущества

- ✅ Работает на serverless функциях Vercel (нет проблем с read-only файловой системой)
- ✅ Автоматическое CDN и кеширование
- ✅ Масштабируемость
- ✅ Публичный доступ к файлам
- ✅ Нет необходимости управлять файлами в репозитории

## Миграция существующих файлов

Если у вас есть файлы в `public/uploads/`, их нужно будет загрузить в Vercel Blob Storage вручную или через миграционный скрипт.

## Локальная разработка

Для локальной разработки вам нужно:
1. Создать Blob Store на Vercel
2. Получить токен доступа
3. Добавить его в `.env.local`:
   ```
   BLOB_READ_WRITE_TOKEN=your_token_here
   ```

Или используйте переменные окружения Vercel при деплое - они будут доступны автоматически.

